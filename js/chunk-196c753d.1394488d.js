(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196c753d"],{"13f7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"articles"},[a("bread-crumb",{attrs:{slot:"header"},slot:"header"},[a("template",{slot:"title"},[t._v(" 文章列表 ")])],2),a("el-form",{staticStyle:{"padding-left":"50px"}},[a("el-form-item",{attrs:{label:"文章状态:"}},[a("el-radio-group",{model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("el-radio",{attrs:{label:5}},[t._v("全部")]),a("el-radio",{attrs:{label:0}},[t._v("草稿")]),a("el-radio",{attrs:{label:1}},[t._v("待审核")]),a("el-radio",{attrs:{label:2}},[t._v("审核通过")]),a("el-radio",{attrs:{label:3}},[t._v("审核失败")])],1)],1),a("el-form-item",{attrs:{label:"频道列表:"}},[a("el-select",{attrs:{placeholder:"请选择频道"},model:{value:t.searchForm.channels_id,callback:function(e){t.$set(t.searchForm,"channels_id",e)},expression:"searchForm.channels_id"}},t._l(t.channels,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"时间选择:"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.changCondition},model:{value:t.searchForm.dateRange,callback:function(e){t.$set(t.searchForm,"dateRange",e)},expression:"searchForm.dateRange"}})],1)],1),a("el-row",{staticClass:"total",attrs:{type:"flex",justify:"middle"}},[a("span",[t._v(" 共找到"+t._s(t.page.total)+"条符合条件的内容 ")])]),t._l(t.list,(function(e){return a("div",{key:e.id.toString(),staticClass:"article-item"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:e.cover.images.length?e.cover.images[0]:t.defaultImg,alt:""}}),a("div",{staticClass:"info"},[a("span",[t._v(t._s(e.title))]),a("el-tag",{staticClass:"tag",attrs:{type:t._f("filterType")(e.status)}},[t._v(t._s(t._f("filterStatus")(e.status)))]),a("span",{staticClass:"date"},[t._v(t._s(e.pubdate))])],1)]),a("div",{staticClass:"right"},[a("span",{on:{click:function(a){return t.toModify(e.id)}}},[a("i",{staticClass:"el-icon-edit"}),t._v("修改")]),a("span",{on:{click:function(a){return t.delMaterial(e.id)}}},[a("i",{staticClass:"el-icon-delete"}),t._v("删除")])])])})),a("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"current-page":t.page.currentPage,"page-size":t.page.pageSize},on:{"current-change":t.changePage}})],1)],2)},n=[],r=(a("d3b7"),a("25f0"),{data:function(){return{searchForm:{status:5,channels_id:null,dateRange:[]},channels:[],list:[],defaultImg:a("5c73"),page:{total:0,pageSize:10,currentPage:1}}},watch:{searchForm:{handler:function(){this.changCondition()},deep:!0}},filters:{filterStatus:function(t){switch(t){case 0:return"草稿";case 1:return"待审核";case 2:return"已发表";case 3:return"审核失败";default:break}},filterType:function(t){switch(t){case 0:return"warning";case 1:return"info";case 2:return"";case 3:return"danger";default:break}}},methods:{toModify:function(t){this.$router.push("/home/publish/".concat(t.toString()))},delMaterial:function(t){var e=this;this.$confirm("是否删除文章？").then((function(){e.$axios({method:"delete",url:"/articles/".concat(t.toString())}).then((function(t){e.$message({type:"success",message:"删除成功"}),e.getConditionArticle()}))}))},changePage:function(t){this.page.currentPage=t,this.getConditionArticle()},changCondition:function(){this.page.currentPage=1,this.getConditionArticle()},getConditionArticle:function(){var t={page:this.page.currentPage,per_page:this.page.pageSize,status:5===this.searchForm.status?null:this.searchForm.status,channel_id:this.searchForm.channels_id,begin_pubdate:this.searchForm.dateRange.length?this.searchForm.dateRange[0]:null,end_pubdate:this.searchForm.dateRange.length>1?this.searchForm.dateRange[1]:null};this.getArticles(t)},getChannels:function(){var t=this;this.$axios({url:"/channels"}).then((function(e){t.channels=e.data.channels}))},getArticles:function(t){var e=this;this.$axios({url:"/articles",params:t}).then((function(t){e.list=t.data.results,e.page.total=t.data.total_count}))}},created:function(){this.getChannels(),this.getArticles({page:1,per_page:10})}}),i=r,l=(a("54e9"),a("2877")),c=Object(l["a"])(i,s,n,!1,null,"1582ffb4",null);e["default"]=c.exports},"25f0":function(t,e,a){"use strict";var s=a("6eeb"),n=a("825a"),r=a("d039"),i=a("ad6d"),l="toString",c=RegExp.prototype,o=c[l],u=r((function(){return"/a/b"!=o.call({source:"a",flags:"b"})})),d=o.name!=l;(u||d)&&s(RegExp.prototype,l,(function(){var t=n(this),e=String(t.source),a=t.flags,s=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?i.call(t):a);return"/"+e+"/"+s}),{unsafe:!0})},"54e9":function(t,e,a){"use strict";var s=a("dec8"),n=a.n(s);n.a},ad6d:function(t,e,a){"use strict";var s=a("825a");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},dec8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-196c753d.1394488d.js.map