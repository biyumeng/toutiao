(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49b0e561"],{"9fe9":function(t,e,a){},a1b6:function(t,e,a){"use strict";var i=a("9fe9"),l=a.n(i);l.a},e9f7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("bread-crumb",{attrs:{slot:"home"},slot:"home"},[a("template",{slot:"title"},[t._v(" 素材管理 ")])],2),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-upload",{attrs:{action:"","http-request":t.uploadImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")])],1)],1),a("el-tabs",{on:{"tab-click":t.changeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部图片",name:"all"}},[a("div",{staticClass:"img-list"},t._l(t.list,(function(e,i){return a("el-card",{key:e.id,staticClass:"img-card"},[a("img",{attrs:{src:e.url,alt:""},on:{click:function(e){return t.openDialog(i)}}}),a("el-row",{staticClass:"operate",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("i",{staticClass:"el-icon-star-on",style:{color:e.is_collected?"red":"#000"},on:{click:function(a){return t.collectOrCancel(e)}}}),a("i",{staticClass:"el-icon-delete-solid",on:{click:function(a){return t.delMaterial(e.id)}}})])],1)})),1)]),a("el-tab-pane",{attrs:{label:"收藏图片",name:"collect"}},[a("div",{staticClass:"img-list"},t._l(t.list,(function(e,i){return a("el-card",{key:e.id,staticClass:"img-card"},[a("img",{attrs:{src:e.url,alt:""},on:{click:function(e){return t.openDialog(i)}}})])})),1)])],1),a("el-row",{staticStyle:{height:"80px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"page-size":t.page.pageSize,"current-page":t.page.currentPage},on:{"current-change":t.changePage}})],1),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{opened:t.openEnd,close:function(e){t.dialogVisible=!1}}},[a("el-carousel",{ref:"myCarosel",attrs:{interval:5e3,arrow:"always",height:"600px"}},t._l(t.list,(function(t,e){return a("el-carousel-item",{key:e},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.url,alt:""}})])})),1)],1)],1)},l=[],n={data:function(){return{dialogVisible:!1,loading:!1,activeName:"all",list:[],page:{total:0,pageSize:12,currentPage:1},clickIndex:-1}},methods:{openEnd:function(){this.$refs.myCarosel.setActiveItem(this.clickIndex)},openDialog:function(t){this.dialogVisible=!0,this.clickIndex=t},delMaterial:function(t){var e=this;this.$confirm("您确定要删除此图片吗？").then((function(){e.$axios({method:"delete",url:"/user/images/".concat(t)}).then((function(t){e.getMaterial()}))}))},collectOrCancel:function(t){var e=this;this.$axios({method:"put",url:"/user/images/".concat(t.id),data:{collect:!t.is_collected}}).then((function(t){e.getMaterial()}))},uploadImg:function(t){var e=this;this.loading=!0;var a=new FormData;a.append("image",t.file),this.$axios({method:"post",url:"/user/images",data:a}).then((function(t){e.loading=!1,e.getMaterial()}))},changePage:function(t){this.page.currentPage=t,this.getMaterial()},changeTab:function(){this.page.currentPage=1,this.getMaterial()},getMaterial:function(){var t=this;this.$axios({url:"/user/images",params:{page:this.page.currentPage,per_page:this.page.pageSize,collect:"collect"===this.activeName}}).then((function(e){t.list=e.data.results,t.page.total=e.data.total_count}))}},created:function(){this.getMaterial()}},s=n,c=(a("a1b6"),a("2877")),r=Object(c["a"])(s,i,l,!1,null,"56c80601",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-49b0e561.ba3e0e7a.js.map