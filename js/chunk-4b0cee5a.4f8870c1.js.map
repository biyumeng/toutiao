{"version":3,"sources":["webpack:///./src/assets/img/back.jpg","webpack:///./src/views/account/index.vue?9778","webpack:///src/views/account/index.vue","webpack:///./src/views/account/index.vue?fa1a","webpack:///./src/views/account/index.vue","webpack:///./src/views/account/index.vue?64a4"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","slot","_v","ref","staticStyle","formData","rules","model","callback","$$v","$set","on","saveUserInfo","staticClass","upLoadImg","photo","defaultImg","staticRenderFns","data","loading","intro","email","mobile","methods","append","params","file","$axios","url","method","eventBus","$refs","myForm","validate","then","type","message","getUserInfo","created","component"],"mappings":"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","file":"js/chunk-4b0cee5a.4f8870c1.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/back.445c9b8a.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('bread-crumb',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('template',{slot:\"title\"},[_vm._v(\"账户信息\")])],2),_c('el-form',{ref:\"myForm\",staticStyle:{\"margin-left\":\"100px\"},attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"intro\",\"label\":\"简介\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},model:{value:(_vm.formData.intro),callback:function ($$v) {_vm.$set(_vm.formData, \"intro\", $$v)},expression:\"formData.intro\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},model:{value:(_vm.formData.email),callback:function ($$v) {_vm.$set(_vm.formData, \"email\", $$v)},expression:\"formData.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},attrs:{\"disabled\":\"\"},model:{value:(_vm.formData.mobile),callback:function ($$v) {_vm.$set(_vm.formData, \"mobile\", $$v)},expression:\"formData.mobile\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveUserInfo}},[_vm._v(\"保存信息\")])],1)],1),_c('el-upload',{staticClass:\"head-upload\",attrs:{\"http-request\":_vm.upLoadImg,\"action\":\"\",\"show-file-list\":false}},[_c('img',{attrs:{\"src\":_vm.formData.photo ? _vm.formData.photo : _vm.defaultImg,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-card v-loading=\"loading\">\n      <bread-crumb slot=\"header\">\n        <template slot=\"title\">账户信息</template>\n      </bread-crumb>\n      <!-- 表单容器 -->\n      <el-form ref=\"myForm\" :model=\"formData\" :rules=\"rules\" style=\"margin-left: 100px\" label-width=\"100px\">\n        <el-form-item prop=\"name\" label=\"用户名\">\n          <el-input v-model=\"formData.name\" style=\"width:40%\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"intro\" label=\"简介\">\n          <el-input v-model=\"formData.intro\" style=\"width:40%\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"email\" label=\"邮箱\">\n          <el-input v-model=\"formData.email\" style=\"width:40%\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"formData.mobile\" disabled style=\"width:40%\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"saveUserInfo\" type=\"primary\">保存信息</el-button>\n        </el-form-item>\n      </el-form>\n      <el-upload :http-request=\"upLoadImg\" class=\"head-upload\" action=\"\" :show-file-list=\"false\">\n        <img :src=\"formData.photo ? formData.photo : defaultImg\" alt=\"\">\n      </el-upload>\n  </el-card>\n</template>\n\n<script>\nimport eventBus from '../../utils/eventBus'\nexport default {\n  data () {\n    return {\n      loading: false,\n      formData: {\n        name: '', // 用户名\n        intro: '', // 简介\n        photo: '', // 头像\n        email: '', // 邮箱\n        mobile: ''// 手机\n      },\n      defaultImg: require('../../assets/img/back.jpg'), // 默认图片\n      rules: {\n        // 用户名和邮箱的规则\n        name: [{ required: true, message: '用户名不能为空' }, { min: 1, max: 7, message: '用户名在1~7之间' }],\n        email: [{ required: true, message: '邮箱不能为空' }, { pattern: /^([a-zA-Z]|[0-9])(\\w|-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/, message: '邮箱格式不正确' }]\n      }\n    }\n  },\n  methods: {\n    // 上传头像方法\n    upLoadImg (params) {\n      this.loading = true\n      let data = new FormData()\n      data.append('photo', params.file)\n      this.$axios({\n        url: '/user/photo',\n        method: 'patch',\n        data\n      }).then(result => {\n        this.loading = false\n        this.formData.photo = result.data.photo\n        // 认为保存成功 通过公共实例更新\n        eventBus.$emit('updateUserInfo')\n      })\n    },\n    // 保存用户信息\n    saveUserInfo () {\n      this.$refs.myForm.validate().then(result => {\n        this.$axios({\n          url: '/user/profile',\n          method: 'patch',\n          data: this.formData\n        }).then(result => {\n          this.$message({\n            type: 'success',\n            message: '保存用户信息成功'\n          })\n          // 认为保存成功 通过公共实例更新\n          eventBus.$emit('updateUserInfo')\n        })\n      })\n    },\n    // 获取用户个人信息\n    getUserInfo () {\n      this.$axios({\n        url: '/user/profile'\n      }).then(result => {\n        this.formData = result.data\n      })\n    }\n  },\n  created () {\n    this.getUserInfo()\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .head-upload{\n    position: absolute;\n    right: 300px;\n    top: 150px;\n    img{\n      width: 200px;\n      height: 200px;\n      border-radius: 50%;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f79b7788&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f79b7788&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f79b7788\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f79b7788&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f79b7788&lang=less&scoped=true&\""],"sourceRoot":""}