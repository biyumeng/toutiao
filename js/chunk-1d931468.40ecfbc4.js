(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d931468"],{"1dde":function(t,e,a){var r=a("d039"),n=a("b622"),o=a("60ae"),i=n("species");t.exports=function(t){return o>=51||!r((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1e63":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("bread-crumb",{attrs:{slot:"header"},slot:"header"},[a("template",{slot:"title"},[t._v("发布文章")])],2),a("el-form",{ref:"publistForm",staticStyle:{"margin-left":"20px"},attrs:{model:t.formData,rules:t.publistRules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"title",label:"标题"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{prop:"content",label:"内容"}},[a("quill-editor",{staticStyle:{height:"300px"},attrs:{type:"textarea"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),a("el-form-item",{staticStyle:{"margin-top":"120px"},attrs:{prop:"cover",label:"封面"}},[a("el-radio-group",{on:{change:t.changeType},model:{value:t.formData.cover.type,callback:function(e){t.$set(t.formData.cover,"type",e)},expression:"formData.cover.type"}},[a("el-radio",{attrs:{label:1}},[t._v("单图")]),a("el-radio",{attrs:{label:3}},[t._v("三图")]),a("el-radio",{attrs:{label:0}},[t._v("无图")]),a("el-radio",{attrs:{label:-1}},[t._v("自动")])],1)],1),a("cover-image",{attrs:{list:t.formData.cover.images},on:{selectTwoImg:t.receiveImg}}),a("el-form-item",{attrs:{prop:"channel_id",label:"频道"}},[a("el-select",{model:{value:t.formData.channel_id,callback:function(e){t.$set(t.formData,"channel_id",e)},expression:"formData.channel_id"}},t._l(t.channels,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.publistArticle(!1)}}},[t._v("发布")]),a("el-button",{on:{click:function(e){return t.publistArticle(!0)}}},[t._v("存入草稿")])],1)],1)],1)},n=[],o=(a("d81d"),{data:function(){return{loading:!1,channels:[],formData:{title:"",content:"",cover:{type:0,images:[]},channel_id:null},publistRules:{title:[{required:!0,message:"文章不能为空"},{min:5,max:30,message:"标题长度在5-30字符之间"}],content:[{required:!0,message:"文章内容不能为空"}],channel_id:[{required:!0,message:"文章频道不能为空"}]}}},watch:{$route:function(t,e){t.params.articleId||(this.formData={title:"",content:"",cover:{type:0,images:[]},channel_id:null})}},methods:{receiveImg:function(t,e){this.formData.cover.images=this.formData.cover.images.map((function(a,r){return r===e?t:a}))},changeType:function(){0===this.formData.cover.type||-1===this.formData.cover.type?this.formData.cover.images=[]:1===this.formData.cover.type?this.formData.cover.images=[""]:3===this.formData.cover.type&&(this.formData.cover.images=["","",""])},getChannels:function(){var t=this;this.$axios({url:"/channels"}).then((function(e){t.channels=e.data.channels}))},publistArticle:function(t){var e=this;this.$refs.publistForm.validate((function(a){if(a){var r=e.$route.params.articleId;e.$axios({url:r?"/articles/".concat(r):"/articles",method:r?"put":"post",params:{draft:t},data:e.formData}).then((function(){e.$message({type:"success",message:"保存成功"}),e.$router.push("/home/articles")}))}}))},getarticleById:function(t){var e=this;this.loading=!0,this.$axios({url:"/articles/".concat(t)}).then((function(t){e.loading=!1,e.formData=t.data}))}},created:function(){this.getChannels();var t=this.$route.params.articleId;t&&this.getarticleById(t)}}),i=o,l=a("2877"),c=Object(l["a"])(i,r,n,!1,null,null,null);e["default"]=c.exports},"65f0":function(t,e,a){var r=a("861d"),n=a("e8b5"),o=a("b622"),i=o("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},b727:function(t,e,a){var r=a("f8c2"),n=a("44ad"),o=a("7b0b"),i=a("50c4"),l=a("65f0"),c=[].push,s=function(t){var e=1==t,a=2==t,s=3==t,u=4==t,f=6==t,m=5==t||f;return function(d,p,h,v){for(var g,b,y=o(d),D=n(y),x=r(p,h,3),_=i(D.length),w=0,$=v||l,k=e?$(d,_):a?$(d,0):void 0;_>w;w++)if((m||w in D)&&(g=D[w],b=x(g,w,y),t))if(e)k[w]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:c.call(k,g)}else if(u)return!1;return f?-1:s||u?u:k}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("d039"),i=a("1dde"),l=i("map"),c=l&&!o((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));r({target:"Array",proto:!0,forced:!l||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-1d931468.40ecfbc4.js.map