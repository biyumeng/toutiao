{"version":3,"sources":["webpack:///./src/views/material/index.vue?43e0","webpack:///./src/views/material/index.vue?1148","webpack:///src/views/material/index.vue","webpack:///./src/views/material/index.vue?a049","webpack:///./src/views/material/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","slot","_v","uploadImg","on","changeTab","model","callback","$$v","activeName","staticClass","_l","item","index","key","id","url","$event","openDialog","style","color","is_collected","collectOrCancel","delMaterial","staticStyle","page","total","pageSize","currentPage","changePage","dialogVisible","openEnd","ref","staticRenderFns","data","loading","list","clickIndex","methods","$refs","myCarosel","setActiveItem","$confirm","then","method","$axios","collect","append","params","file","newPage","getMaterial","per_page","created","component"],"mappings":"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","file":"js/chunk-49b0e561.ba3e0e7a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=56c80601&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=56c80601&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('bread-crumb',{attrs:{\"slot\":\"home\"},slot:\"home\"},[_c('template',{slot:\"title\"},[_vm._v(\" 素材管理 \")])],2),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-upload',{attrs:{\"action\":\"\",\"http-request\":_vm.uploadImg,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1),_c('el-tabs',{on:{\"tab-click\":_vm.changeTab},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"全部图片\",\"name\":\"all\"}},[_c('div',{staticClass:\"img-list\"},_vm._l((_vm.list),function(item,index){return _c('el-card',{key:item.id,staticClass:\"img-card\"},[_c('img',{attrs:{\"src\":item.url,\"alt\":\"\"},on:{\"click\":function($event){return _vm.openDialog(index)}}}),_c('el-row',{staticClass:\"operate\",attrs:{\"type\":\"flex\",\"align\":\"middle\",\"justify\":\"space-around\"}},[_c('i',{staticClass:\"el-icon-star-on\",style:({ color:item.is_collected?'red':'#000' }),on:{\"click\":function($event){return _vm.collectOrCancel(item)}}}),_c('i',{staticClass:\"el-icon-delete-solid\",on:{\"click\":function($event){return _vm.delMaterial(item.id)}}})])],1)}),1)]),_c('el-tab-pane',{attrs:{\"label\":\"收藏图片\",\"name\":\"collect\"}},[_c('div',{staticClass:\"img-list\"},_vm._l((_vm.list),function(item,index){return _c('el-card',{key:item.id,staticClass:\"img-card\"},[_c('img',{attrs:{\"src\":item.url,\"alt\":\"\"},on:{\"click\":function($event){return _vm.openDialog(index)}}})])}),1)])],1),_c('el-row',{staticStyle:{\"height\":\"80px\"},attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.page.total,\"page-size\":_vm.page.pageSize,\"current-page\":_vm.page.currentPage},on:{\"current-change\":_vm.changePage}})],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"opened\":_vm.openEnd,\"close\":function($event){_vm.dialogVisible=false}}},[_c('el-carousel',{ref:\"myCarosel\",attrs:{\"interval\":5000,\"arrow\":\"always\",\"height\":\"600px\"}},_vm._l((_vm.list),function(item,index){return _c('el-carousel-item',{key:index},[_c('img',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":item.url,\"alt\":\"\"}})])}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-card v-loading=\"loading\">\n        <!-- 头部内容 -->\n        <bread-crumb slot=\"home\">\n            <template slot=\"title\">\n                素材管理\n            </template>\n        </bread-crumb>\n\n        <!-- 上传标签 -->\n        <el-row type=\"flex\" justify=\"end\">\n          <el-upload action=\"\" :http-request=\"uploadImg\" :show-file-list=\"false\">\n            <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n          </el-upload>\n        </el-row>\n\n        <!-- 标签页 -->\n        <el-tabs v-model=\"activeName\" @tab-click=\"changeTab\">\n            <el-tab-pane label=\"全部图片\" name=\"all\">\n              <!-- 生成页面结构 -->\n              <div class=\"img-list\">\n                <el-card class=\"img-card\" v-for=\"(item,index) in list\" :key=\"item.id\">\n                  <img @click=\"openDialog(index)\" :src=\"item.url\" alt=\"\">\n                  <el-row class=\"operate\" type=\"flex\" align=\"middle\" justify=\"space-around\">\n                    <i @click=\"collectOrCancel(item)\" :style=\"{ color:item.is_collected?'red':'#000' }\" class=\"el-icon-star-on\"></i>\n                    <i @click=\"delMaterial(item.id)\" class=\"el-icon-delete-solid\"></i>\n                  </el-row>\n                </el-card>\n              </div>\n\n            </el-tab-pane>\n            <el-tab-pane label=\"收藏图片\" name=\"collect\">\n              <div class=\"img-list\">\n                <el-card class=\"img-card\" v-for=\"(item,index) in list\" :key=\"item.id\">\n                  <img @click=\"openDialog(index)\" :src=\"item.url\" alt=\"\">\n                </el-card>\n              </div>\n            </el-tab-pane>\n        </el-tabs>\n        <!-- 公共分页 -->\n        <el-row type=\"flex\" justify=\"center\" align=\"middle\" style=\"height:80px\">\n          <el-pagination\n              background\n              layout=\"prev, pager, next\"\n              :total=\"page.total\"\n              :page-size=\"page.pageSize\"\n              :current-page=\"page.currentPage\"\n              @current-change=\"changePage\">\n          </el-pagination>\n        </el-row>\n        <el-dialog @opened=\"openEnd\" :visible=\"dialogVisible\" @close=\"dialogVisible=false\">\n          <el-carousel ref=\"myCarosel\" :interval=\"5000\" arrow=\"always\" height=\"600px\">\n            <el-carousel-item v-for=\"(item,index) in list\" :key=\"index\">\n              <img style=\"width:100%;height:100%\" :src=\"item.url\" alt=\"\">\n            </el-carousel-item>\n          </el-carousel>\n        </el-dialog>\n    </el-card>\n</template>\n\n<script>\n// import { url } from 'inspector'\nexport default {\n  data () {\n    return {\n      dialogVisible: false, // 弹层\n      loading: false,\n      activeName: 'all', // 当前选中的标签\n      list: [], // 接收素材的数据\n      page: {\n        total: 0,\n        pageSize: 12,\n        currentPage: 1\n      }, // 专门存放分页信息\n      clickIndex: -1 // 走马灯点击的索引\n    }\n  },\n  methods: {\n    // dialog里的回调属性方法\n    openEnd () {\n      this.$refs.myCarosel.setActiveItem(this.clickIndex)\n    },\n    // 打开弹层\n    openDialog (index) {\n      this.dialogVisible = true\n      this.clickIndex = index\n    },\n    // 删除用户素材\n    delMaterial (id) {\n      this.$confirm('您确定要删除此图片吗？').then(() => {\n        this.$axios({\n          method: 'delete',\n          url: `/user/images/${id}`\n        }).then((res) => {\n          this.getMaterial()\n        })\n      })\n    },\n\n    // 取消或收藏\n    collectOrCancel (item) {\n      this.$axios({\n        method: 'put',\n        url: `/user/images/${item.id}`,\n        data: {\n          collect: !item.is_collected // 取反 因为收藏状态就要取消收藏\n        }\n      }).then(res => {\n        this.getMaterial()\n      })\n    },\n\n    // 上传图片\n    uploadImg (params) {\n      this.loading = true // 打开弹层\n      let data = new FormData()\n      data.append('image', params.file) // 文件添加到参数\n      this.$axios({\n        method: 'post',\n        url: '/user/images',\n        data: data\n      }).then(result => {\n        this.loading = false// 关闭弹层\n        this.getMaterial()\n      })\n    },\n\n    // 改变页码方法\n    changePage (newPage) {\n      this.page.currentPage = newPage\n      this.getMaterial()\n    },\n\n    // 切换页签方法\n    // 切换后this.activeName改变\n    changeTab () {\n      this.page.currentPage = 1 // 重置回到第一页\n      this.getMaterial()\n    },\n\n    // 获取素材的方法\n    getMaterial () {\n      this.$axios({\n        url: '/user/images',\n        params: {\n          page: this.page.currentPage,\n          per_page: this.page.pageSize,\n          // 根据文档传入false是获得所有数据 传入true是获得收藏数据 如果《this.activeName === 'collect'》是true这显示收藏的图片，false显示全部\n          collect: this.activeName === 'collect'\n        }\n      }).then(result => {\n        this.list = result.data.results // 获得图片数据\n        this.page.total = result.data.total_count // 获得总条数\n      })\n    }\n  },\n  created () {\n    this.getMaterial()\n  }\n}\n</script>\n\n<style lang='less' scoped>\n  .img-list{\n    display: flex;\n    flex-wrap:wrap;\n    .img-card{\n      width: 200px;\n      height: 220px;\n      margin: 20px 50px;\n      position: relative;\n      img{\n        width: 100%;\n        height: 100%;\n      }\n      .operate{\n        height: 36px;\n        width: 100%;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        font-size: 20px;\n        background-color: #f4f5f6;\n        i{\n          cursor: pointer;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=56c80601&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=56c80601&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56c80601\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}